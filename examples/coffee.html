<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../build/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="../build/nv.d3.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    <style>
        text {
            font: 12px Lato;
        }
        svg {
            display: block;
        }
        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }

		.nv-axis .tick line {
		display:none;
		}

		
    </style>
</head>
<body class='with-3d-shadow with-transitions'>

    <script>
        var expandLegend = function() {
            var exp = chart.legend.expanded();
            chart.legend.expanded(!exp);
            chart.update();
        }
    </script>
<svg id="chart1"></svg>

<script>

    var histcatexplong = [
        {
            "key" : "Brazil" ,
            "values" : [ [ 633830400000 , 16936] , 
			[ 665366400000 , 21183] , 
			[ 696902400000 , 18791] , 
			[ 728524800000 , 17838] , 
			[ 760060800000 , 17273] , 
			[ 791596800000 , 14468] , 
			[ 823132800000 , 15251] , 
			[ 854755200000 , 16801] , 
			[ 886291200000 , 18144] , 
			[ 917827200000 , 23149] , 
			[ 949363200000 , 18016] , 
			[ 980985600000 , 23172] , 
			[ 1012521600000 , 27982] , 
			[ 1044057600000 , 25711],
			[ 1075593600000 , 26478] , 
			[ 1107216000000 , 26198] , 
			[ 1138752000000 , 27369] , 
			[ 1170288000000 , 28184] , 
			[ 1201824000000 , 29510] , 
			[ 1233446400000 , 30369] , 
			[ 1264982400000 , 33052] , 
			[ 1296518400000 , 33512] , 
			[ 1328054400000 , 28324] , 
			[ 1359676800000 , 31550] , 
			[ 1391212800000 , 36420]] 
			
        } ,
		
		 {
            "key" : "Vietnam" ,
            "values" : [ [ 633830400000 , 1145] , 
			[ 665366400000 , 1201] , 
			[ 696902400000 , 1938] , 
			[ 728524800000 , 2072] , 
			[ 760060800000 , 2721] , 
			[ 791596800000 , 3546] , 
			[ 823132800000 , 3779] , 
			[ 854755200000 , 6178] , 
			[ 886291200000 , 6467] , 
			[ 917827200000 , 7727] , 
			[ 949363200000 , 11618] , 
			[ 980985600000 , 14106] , 
			[ 1012521600000 , 11771] , 
			[ 1044057600000 , 11631],
			[ 1075593600000 , 14859] , 
			[ 1107216000000 , 13432] , 
			[ 1138752000000 , 13905] , 
			[ 1170288000000 , 17936] , 
			[ 1201824000000 , 16101] , 
			[ 1233446400000 , 17052] , 
			[ 1264982400000 , 14229] , 
			[ 1296518400000 , 17717] , 
			[ 1328054400000 , 22864] , 
			[ 1359676800000 , 21681] , 
			[ 1391212800000 , 25298]] 
			
        } ,
		
		 {
            "key" : "Colombia" ,
            "values" : [ [ 633830400000 , 13944] , 
			[ 665366400000 , 12599] , 
			[ 696902400000 , 16564] , 
			[ 728524800000 , 13568] , 
			[ 760060800000 , 11768] , 
			[ 791596800000 , 9814] , 
			[ 823132800000 , 10588] , 
			[ 854755200000 , 10919] , 
			[ 886291200000 , 11260] , 
			[ 917827200000 , 9995] , 
			[ 949363200000 , 9177] , 
			[ 980985600000 , 9944] , 
			[ 1012521600000 , 10273] , 
			[ 1044057600000 , 10244],
			[ 1075593600000 , 10194] , 
			[ 1107216000000 , 10871] , 
			[ 1138752000000 , 10945] , 
			[ 1170288000000 , 11300] , 
			[ 1201824000000 , 11085] , 
			[ 1233446400000 , 7894] , 
			[ 1264982400000 , 7822] , 
			[ 1296518400000 , 7734] , 
			[ 1328054400000 , 7170] , 
			[ 1359676800000 , 9670] , 
			[ 1391212800000 , 10954]] 
			
        } ,
		 {
            "key" : "Indonesia" ,
            "values" : [ [ 633830400000 , 6903] , 
			[ 665366400000 , 6171] , 
			[ 696902400000 , 4604] , 
			[ 728524800000 , 5662] , 
			[ 760060800000 , 4605] , 
			[ 791596800000 , 3947] , 
			[ 823132800000 , 6440] , 
			[ 854755200000 , 5755] , 
			[ 886291200000 , 5598] , 
			[ 917827200000 , 5115] , 
			[ 949363200000 , 5358] , 
			[ 980985600000 , 5243] , 
			[ 1012521600000 , 4286] , 
			[ 1044057600000 , 4795],
			[ 1075593600000 , 5456] , 
			[ 1107216000000 , 6744] , 
			[ 1138752000000 , 5280] , 
			[ 1170288000000 , 4149] , 
			[ 1201824000000 , 5741] , 
			[ 1233446400000 , 7907] , 
			[ 1264982400000 , 5489] , 
			[ 1296518400000 , 6159] , 
			[ 1328054400000 , 10722] , 
			[ 1359676800000 , 10882] , 
			[ 1391212800000 , 5977]] 
			
        } ,
		
		 {
            "key" : "India" ,
            "values" : [ [ 633830400000 , 1979] , 
			[ 665366400000 , 1727] , 
			[ 696902400000 , 1816] , 
			[ 728524800000 , 2102] , 
			[ 760060800000 , 2496] , 
			[ 791596800000 , 2469] , 
			[ 823132800000 , 3120] , 
			[ 854755200000 , 2640] , 
			[ 886291200000 , 3487] , 
			[ 917827200000 , 3622] , 
			[ 949363200000 , 4229] , 
			[ 980985600000 , 3730] , 
			[ 1012521600000 , 3550] , 
			[ 1044057600000 , 3707],
			[ 1075593600000 , 3647] , 
			[ 1107216000000 , 2829] , 
			[ 1138752000000 , 3578] , 
			[ 1170288000000 , 3319] , 
			[ 1201824000000 , 3377] , 
			[ 1233446400000 , 3007] , 
			[ 1264982400000 , 4647] , 
			[ 1296518400000 , 5414] , 
			[ 1328054400000 , 5044] , 
			[ 1359676800000 , 4963] , 
			[ 1391212800000 , 5131]] 
			
        } ,
		
		 {
            "key" : "Honduras" ,
            "values" : [ [ 633830400000 , 1735] , 
			[ 665366400000 , 1444] , 
			[ 696902400000 , 1960] , 
			[ 728524800000 , 1705] , 
			[ 760060800000 , 1718] , 
			[ 791596800000 , 1796] , 
			[ 823132800000 , 2060] , 
			[ 854755200000 , 1722] , 
			[ 886291200000 , 2329] , 
			[ 917827200000 , 1987] , 
			[ 949363200000 , 2879] , 
			[ 980985600000 , 2392] , 
			[ 1012521600000 , 2711] , 
			[ 1044057600000 , 2425],
			[ 1075593600000 , 2779] , 
			[ 1107216000000 , 2392] , 
			[ 1138752000000 , 2898] , 
			[ 1170288000000 , 3312] , 
			[ 1201824000000 , 3259] , 
			[ 1233446400000 , 3084] , 
			[ 1264982400000 , 3349] , 
			[ 1296518400000 , 3947] , 
			[ 1328054400000 , 5508] , 
			[ 1359676800000 , 4185] , 
			[ 1391212800000 , 4252]] 
			
        } ,
		
		 {
            "key" : "Uganda" ,
            "values" : [ [ 633830400000 , 2353] , 
			[ 665366400000 , 2095] , 
			[ 696902400000 , 1961] , 
			[ 728524800000 , 1829] , 
			[ 760060800000 , 3369] , 
			[ 791596800000 , 3079] , 
			[ 823132800000 , 4655] , 
			[ 854755200000 , 3502] , 
			[ 886291200000 , 3286] , 
			[ 917827200000 , 3841] , 
			[ 949363200000 , 2513] , 
			[ 980985600000 , 3060] , 
			[ 1012521600000 , 3358] , 
			[ 1044057600000 , 2522],
			[ 1075593600000 , 2627] , 
			[ 1107216000000 , 2369] , 
			[ 1138752000000 , 2173] , 
			[ 1170288000000 , 2693] , 
			[ 1201824000000 , 3311] , 
			[ 1233446400000 , 3014] , 
			[ 1264982400000 , 2657] , 
			[ 1296518400000 , 3142] , 
			[ 1328054400000 , 2685] , 
			[ 1359676800000 , 3672] , 
			[ 1391212800000 , 3442]] 
			
        } ,
		
		 {
            "key" : "Ethiopia" ,
            "values" : [ [ 633830400000 , 1074] , 
			[ 665366400000 , 841] , 
			[ 696902400000 , 734] , 
			[ 728524800000 , 1167] , 
			[ 760060800000 , 1475] , 
			[ 791596800000 , 1276] , 
			[ 823132800000 , 1838] , 
			[ 854755200000 , 1980] , 
			[ 886291200000 , 1917] , 
			[ 917827200000 , 1818] , 
			[ 949363200000 , 1982] , 
			[ 980985600000 , 1376] , 
			[ 1012521600000 , 2055] , 
			[ 1044057600000 , 2229],
			[ 1075593600000 , 2491] , 
			[ 1107216000000 , 2435] , 
			[ 1138752000000 , 2936] , 
			[ 1170288000000 , 2604] , 
			[ 1201824000000 , 2852] , 
			[ 1233446400000 , 1851] , 
			[ 1264982400000 , 3324] , 
			[ 1296518400000 , 2675] , 
			[ 1328054400000 , 3203] , 
			[ 1359676800000 , 2870] , 
			[ 1391212800000 , 3117]] 
			
        } ,
		
		 {
            "key" : "Guatemala" ,
            "values" : [ [ 633830400000 , 3240] , 
			[ 665366400000 , 2832] , 
			[ 696902400000 , 3328] , 
			[ 728524800000 , 3751] , 
			[ 760060800000 , 3274] , 
			[ 791596800000 , 3701] , 
			[ 823132800000 , 3979] , 
			[ 854755200000 , 4244] , 
			[ 886291200000 , 3542] , 
			[ 917827200000 , 4681] , 
			[ 949363200000 , 4852] , 
			[ 980985600000 , 4110] , 
			[ 1012521600000 , 3491] , 
			[ 1044057600000 , 3821],
			[ 1075593600000 , 3310] , 
			[ 1107216000000 , 3466] , 
			[ 1138752000000 , 3312] , 
			[ 1170288000000 , 3726] , 
			[ 1201824000000 , 3778] , 
			[ 1233446400000 , 3493] , 
			[ 1264982400000 , 3468] , 
			[ 1296518400000 , 3697] , 
			[ 1328054400000 , 3750] , 
			[ 1359676800000 , 3575] , 
			[ 1391212800000 , 3045]] 
			
        } ,
		
		 {
            "key" : "Peru" ,
            "values" : [ [ 633830400000 , 1105] , 
			[ 665366400000 , 1042] , 
			[ 696902400000 , 1061] , 
			[ 728524800000 , 775] , 
			[ 760060800000 , 1057] , 
			[ 791596800000 , 1760] , 
			[ 823132800000 , 1679] , 
			[ 854755200000 , 1648] , 
			[ 886291200000 , 1949] , 
			[ 917827200000 , 2407] , 
			[ 949363200000 , 2362] , 
			[ 980985600000 , 2663] , 
			[ 1012521600000 , 2789] , 
			[ 1044057600000 , 2503],
			[ 1075593600000 , 3184] , 
			[ 1107216000000 , 2369] , 
			[ 1138752000000 , 3881] , 
			[ 1170288000000 , 2879] , 
			[ 1201824000000 , 3733] , 
			[ 1233446400000 , 3074] , 
			[ 1264982400000 , 3817] , 
			[ 1296518400000 , 4697] , 
			[ 1328054400000 , 4310] , 
			[ 1359676800000 , 3971] , 
			[ 1391212800000 , 2720]] 
			
        } ,
		
		 {
            "key" : "Mexico" ,
            "values" : [ [ 633830400000 , 3683] , 
			[ 665366400000 , 3531] , 
			[ 696902400000 , 3332] , 
			[ 728524800000 , 3264] , 
			[ 760060800000 , 2789] , 
			[ 791596800000 , 3626] , 
			[ 823132800000 , 4633] , 
			[ 854755200000 , 4502] , 
			[ 886291200000 , 3399] , 
			[ 917827200000 , 4358] , 
			[ 949363200000 , 5304] , 
			[ 980985600000 , 3333] , 
			[ 1012521600000 , 2645] , 
			[ 1044057600000 , 2596],
			[ 1075593600000 , 2362] , 
			[ 1107216000000 , 1985] , 
			[ 1138752000000 , 2570] , 
			[ 1170288000000 , 2912] , 
			[ 1201824000000 , 2448] , 
			[ 1233446400000 , 2838] , 
			[ 1264982400000 , 2498] , 
			[ 1296518400000 , 2907] , 
			[ 1328054400000 , 3556] , 
			[ 1359676800000 , 3132] , 
			[ 1391212800000 , 2496]] 
			
        } ,
		
		 {
            "key" : "Nicaragua" ,
            "values" : [ [ 633830400000 , 671] , 
			[ 665366400000 , 392] , 
			[ 696902400000 , 636] , 
			[ 728524800000 , 476] , 
			[ 760060800000 , 624] , 
			[ 791596800000 , 681] , 
			[ 823132800000 , 822] , 
			[ 854755200000 , 714] , 
			[ 886291200000 , 941] , 
			[ 917827200000 , 984] , 
			[ 949363200000 , 1367] , 
			[ 980985600000 , 1365] , 
			[ 1012521600000 , 955] , 
			[ 1044057600000 , 1013] ,
			[ 1075593600000 , 1311] , 
			[ 1107216000000 , 1003] , 
			[ 1138752000000 , 1445] , 
			[ 1170288000000 , 1259] , 
			[ 1201824000000 , 1625] , 
			[ 1233446400000 , 1374] , 
			[ 1264982400000 , 1712] , 
			[ 1296518400000 , 1468] , 
			[ 1328054400000 , 1987] , 
			[ 1359676800000 , 1661] , 
			[ 1391212800000 , 1900]] 
			
        } ,
		
		 {
            "key" : "Côte d'Ivoire" ,
            "values" : [ [ 633830400000 , 4283] , 
			[ 665366400000 , 3805] , 
			[ 696902400000 , 4546] , 
			[ 728524800000 , 4033] , 
			[ 760060800000 , 2444] , 
			[ 791596800000 , 2494] , 
			[ 823132800000 , 2751] , 
			[ 854755200000 , 4713] , 
			[ 886291200000 , 4365] , 
			[ 917827200000 , 2406] , 
			[ 949363200000 , 6110] , 
			[ 980985600000 , 4095] , 
			[ 1012521600000 , 3253] , 
			[ 1044057600000 , 2647],
			[ 1075593600000 , 2573] , 
			[ 1107216000000 , 1754] , 
			[ 1138752000000 , 1751] , 
			[ 1170288000000 , 2196] , 
			[ 1201824000000 , 1490] , 
			[ 1233446400000 , 1807] , 
			[ 1264982400000 , 1912] , 
			[ 1296518400000 , 772] , 
			[ 1328054400000 , 1712] , 
			[ 1359676800000 , 1962] , 
			[ 1391212800000 , 1641]] 
			
        } ,
		
		 {
            "key" : "Costa Rica" ,
            "values" : [ [ 633830400000 , 2266] , 
			[ 665366400000 , 2400] , 
			[ 696902400000 , 2431] , 
			[ 728524800000 , 2364] , 
			[ 760060800000 , 2105] , 
			[ 791596800000 , 2067] , 
			[ 823132800000 , 2430] , 
			[ 854755200000 , 2099] , 
			[ 886291200000 , 2045] , 
			[ 917827200000 , 2195] , 
			[ 949363200000 , 1965] , 
			[ 980985600000 , 2018] , 
			[ 1012521600000 , 1784] , 
			[ 1044057600000 , 1702],
			[ 1075593600000 , 1424] , 
			[ 1107216000000 , 1480] , 
			[ 1138752000000 , 1310] , 
			[ 1170288000000 , 1364] , 
			[ 1201824000000 , 1440] , 
			[ 1233446400000 , 1236] , 
			[ 1264982400000 , 1200] , 
			[ 1296518400000 , 1243] , 
			[ 1328054400000 , 1374] , 
			[ 1359676800000 , 1344] , 
			[ 1391212800000 , 1207]] 
			
        } ,
		
		 {
            "key" : "Ecuador" ,
            "values" : [ [ 633830400000 , 1784] , 
			[ 665366400000 , 1416] , 
			[ 696902400000 , 1273] , 
			[ 728524800000 , 1599] , 
			[ 760060800000 , 2145] , 
			[ 791596800000 , 1540] , 
			[ 823132800000 , 1539] , 
			[ 854755200000 , 1045] , 
			[ 886291200000 , 1056] , 
			[ 917827200000 , 988] , 
			[ 949363200000 , 697] , 
			[ 980985600000 , 756] , 
			[ 1012521600000 , 565] , 
			[ 1044057600000 , 621],
			[ 1075593600000 , 704] , 
			[ 1107216000000 , 993] , 
			[ 1138752000000 , 1015] , 
			[ 1170288000000 , 991] , 
			[ 1201824000000 , 868] , 
			[ 1233446400000 , 1086] , 
			[ 1264982400000 , 1202] , 
			[ 1296518400000 , 1532] , 
			[ 1328054400000 , 1580] , 
			[ 1359676800000 , 1262] , 
			[ 1391212800000 , 1129]] 
			
        } 
	
    ];

    var colors = d3.scale.category20();

    var chart;
    nv.addGraph(function() {
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
			.color(['#3182bd', '#6baed6', '#9ecae1', '#c6dbef', '#e6550d', '#fd8d3c', '#fdae6b', '#fdd0a2', '#31a354', '#74c476', '#a1d99b', '#c7e9c0', '#756bb1', '#9e9ac8','#bcbddc'])
            .controlLabels({stacked: "Stacked"})
			
			//.interpolate("cardinal")
			
			//.padData(true)
			//.yDomain([0,3250000])
            .duration(300);

        chart.xAxis
			//.ticks(10)
			//.staggerLabels(true) 
			.tickFormat(function(d) { return d3.time.format(' %Y')(new Date(d)) });
			
		chart.xScale(d3.time.scale());
		
	 chart.margin({left: 100}) 
     chart.margin({right: 100}) 
		
        chart.yAxis
			.axisLabel('Thousand 60kg bags of coffee')
			.axisLabelDistance(20)
			.ticks(8)
			.tickFormat(d3.format('.2s'));
			
			
			//Example of how to customize the tooltip.
		chart.interactiveLayer
			.tooltip
			.headerFormatter(function(d) {return "Year: " + d3.time.format('%Y')(new Date(d));})
			.valueFormatter(d3.format(','));
			
			d3.select('#chart1')
			  .append("text")
			  .attr("x", 300)             
			  .attr("y", 100)
			  .attr("text-anchor", "middle")  
			  .style("font-size", "16px")		  
			  .text("Leading Coffee Exporters 1990 - 2014");
			



        //chart.legend.vers('furious');

        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function() {
                setTimeout(function() {
                    d3.selectAll('#chart1 *').each(function() {
                        if(this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });

        nv.utils.windowResize(chart.update);
        return chart;
    });


</script>
</body>
</html>
